<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>å…³äºSupervisorå’ŒNginxçš„ä½¿ç”¨ - hellojxl</title><link rel="icon" type="image/png" href=icons/myicon.png /><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="å…³äºSupervisorå’ŒNginxçš„ä½¿ç”¨" />
<meta property="og:description" content="æ„Ÿè§‰å¥½ä¹…æ²¡å†™äº†ï¼Œé‚£å°±ç®€å•è¯´ä¸€ä¸‹æœ€è¿‘å·¥ä½œä¸­æ‰€ç”¨åˆ°çš„Nginxå’ŒSupervisorå§ï¼Œè™½ç„¶ç½‘ä¸Šä¹Ÿä¸€æœä¸€å¤§æŠŠï¼Œå°±å½“è‡ªå·±åšä¸‹æ€»ç»“å§
Nginxçš„ä½¿ç”¨ å·¥ä½œä¸­ç”¨çš„æ˜¯centosï¼Œå®‰è£…ç®€å•çš„ç”¨yumç›´æ¥å®‰è£…çš„ï¼Œè¿˜å¯ä»¥ç›´æ¥å¼€æœºå¯åŠ¨ï¼Œä¸‹é¢ç®€å•è¯´è¯´è·¯å¾„åŒ¹é…çš„é—®é¢˜ï¼Œé¡¹ç›®åˆšå¼€å§‹çš„æ˜¯ç”¨çš„æ˜¯åç¼€åè¿›è¡ŒåŒ¹é…ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š
location ~*\.(gif|png|jpg|jpeg|bmp)$ {default_type	&#39;application/octet-stream&#39;;root	/home/Images/;expires	1d;}å¦‚æœé¡¹ç›®ä¸­åªéœ€è¦åŒ¹é…ä¸€ç§ç±»å‹çš„å›¾ç‰‡ç”¨è¿™ç§æ¨¡å¼å°±å¯ä»¥äº†ï¼Œå¦å¤–è¿™ç§åŒ¹é…æ¯”locationè¦ç²¾ç¡®ï¼Œæ‰€ä»¥é»˜è®¤æœ€ç»ˆä¼šåŒ¹é…è¿™ç§ç±»å‹ï¼Œæ¯”å¦‚æƒ³è®¿é—®swaggerçš„å›¾ç‰‡ï¼Œç»“æœå°±å› ä¸ºè¿™ä¸ªåŸå› è®¿é—®ä¸äº†ï¼Œå¯ä»¥å°è¯•åŠ ^~è¿›è¡Œå¤„ç†å¹¶ä¸”è¦æ”¾åˆ°è¿™ä¸ªä¹‹å‰ï¼Œä½†æ˜¯å› ä¸ºè¿™ä¸ªé¡¹ç›®ä¸­åˆ†å¥½å‡ ç§ç±»å‹çš„å›¾ç‰‡ï¼Œéœ€è¦å•ç‹¬åˆ†å¼€è®¿é—®ï¼Œæ‰€ä»¥æœ€ç»ˆå…¨æ˜¯ç”¨locationè¿›è¡ŒåŒ¹é…çš„ï¼Œè€Œä¸”å˜ç®€å•äº†
location ~* /logo/ {root	/;rewrite	/logo/(.*)$ /home/logo/Images/$1 break;}è¿˜æœ‰æ¬¡ä¸çŸ¥é“ä»€ä¹ˆåŸå› webç›®å½•çš„æƒé™çªç„¶å˜äº†ï¼Œé€ æˆ403 forbiddenäº†ï¼ŒæŸ¥çœ‹nginxæ—¥å¿—ä¹Ÿæ˜¯æƒé™è¢«æ‹’ç»ï¼Œé€šè¿‡chmod -R 777 *è¿˜æ˜¯ä¸è¡Œï¼Œæœç´¢ç½‘ä¸Šå‘ç°éœ€è¦é‡å¯nginxï¼Œç®€å•reloadæ˜¯æ²¡ç”¨çš„ï¼Œè¿™é‡Œè®°å½•ä¸‹
Supervisorçš„ä½¿ç”¨ ä¸‹é¢è¯´è¯´Supervisorçš„ç”¨æ³•ï¼Œåˆšå¼€å§‹æŠ˜è…¾äº†åŠå¤©éƒ½ä¸èµ·ä½œç”¨ï¼Œå› ä¸º[include]å‰é¢çš„;å¿˜è®°åˆ æ‰äº†ï¼Œå½“æ—¶æ˜¯ç›´æ¥å†™åœ¨ä¸‹é¢äº†ï¼Œä¸ç®¡æ€ä¹ˆè¯´å€’æ˜¯èµ·ä½œç”¨äº†ï¼Œé…ç½®å¦‚ä¸‹ï¼š
[program:redis]command=redis-serverdirectory=/usr/local/bin/user=userautostart=trueautorestart=truestartsecs=2[program:TestApi]command=dotnet TestApi.dlldirectory=/home/project/TestApi/stderr_logfile=/var/log/museumApi.error.logstdout_logfile=/var/log/museumApi.stdout.logenvironment=ASPNETCORE_ENVIRONMNET=Productionuser=userautostart=trueautorestart=truestartsecs=2 è¿˜æœ‰webç®¡ç†ç•Œé¢ï¼Œé…ç½®å¦‚ä¸‹ï¼š
[inet_http_server] ; inet (TCP) server disabled by defaultport=0.0.0.0:9001 ; ip_address:port specifier, *:port for all ifaceusername=admin ; default is no username (open server)password=123123 ; default is no password (open server) ä¸è¿‡ä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ç”¨ï¼Œä¸å®‰å…¨ï¼" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/%E5%85%B3%E4%BA%8Esupervisor%E5%92%8Cnginx%E7%9A%84%E4%BD%BF%E7%94%A8/" />
<meta property="article:published_time" content="2018-06-08T21:44:06+00:00" />
<meta property="article:modified_time" content="2018-06-08T21:44:06+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="å…³äºSupervisorå’ŒNginxçš„ä½¿ç”¨"/>
<meta name="twitter:description" content="æ„Ÿè§‰å¥½ä¹…æ²¡å†™äº†ï¼Œé‚£å°±ç®€å•è¯´ä¸€ä¸‹æœ€è¿‘å·¥ä½œä¸­æ‰€ç”¨åˆ°çš„Nginxå’ŒSupervisorå§ï¼Œè™½ç„¶ç½‘ä¸Šä¹Ÿä¸€æœä¸€å¤§æŠŠï¼Œå°±å½“è‡ªå·±åšä¸‹æ€»ç»“å§
Nginxçš„ä½¿ç”¨ å·¥ä½œä¸­ç”¨çš„æ˜¯centosï¼Œå®‰è£…ç®€å•çš„ç”¨yumç›´æ¥å®‰è£…çš„ï¼Œè¿˜å¯ä»¥ç›´æ¥å¼€æœºå¯åŠ¨ï¼Œä¸‹é¢ç®€å•è¯´è¯´è·¯å¾„åŒ¹é…çš„é—®é¢˜ï¼Œé¡¹ç›®åˆšå¼€å§‹çš„æ˜¯ç”¨çš„æ˜¯åç¼€åè¿›è¡ŒåŒ¹é…ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š
location ~*\.(gif|png|jpg|jpeg|bmp)$ {default_type	&#39;application/octet-stream&#39;;root	/home/Images/;expires	1d;}å¦‚æœé¡¹ç›®ä¸­åªéœ€è¦åŒ¹é…ä¸€ç§ç±»å‹çš„å›¾ç‰‡ç”¨è¿™ç§æ¨¡å¼å°±å¯ä»¥äº†ï¼Œå¦å¤–è¿™ç§åŒ¹é…æ¯”locationè¦ç²¾ç¡®ï¼Œæ‰€ä»¥é»˜è®¤æœ€ç»ˆä¼šåŒ¹é…è¿™ç§ç±»å‹ï¼Œæ¯”å¦‚æƒ³è®¿é—®swaggerçš„å›¾ç‰‡ï¼Œç»“æœå°±å› ä¸ºè¿™ä¸ªåŸå› è®¿é—®ä¸äº†ï¼Œå¯ä»¥å°è¯•åŠ ^~è¿›è¡Œå¤„ç†å¹¶ä¸”è¦æ”¾åˆ°è¿™ä¸ªä¹‹å‰ï¼Œä½†æ˜¯å› ä¸ºè¿™ä¸ªé¡¹ç›®ä¸­åˆ†å¥½å‡ ç§ç±»å‹çš„å›¾ç‰‡ï¼Œéœ€è¦å•ç‹¬åˆ†å¼€è®¿é—®ï¼Œæ‰€ä»¥æœ€ç»ˆå…¨æ˜¯ç”¨locationè¿›è¡ŒåŒ¹é…çš„ï¼Œè€Œä¸”å˜ç®€å•äº†
location ~* /logo/ {root	/;rewrite	/logo/(.*)$ /home/logo/Images/$1 break;}è¿˜æœ‰æ¬¡ä¸çŸ¥é“ä»€ä¹ˆåŸå› webç›®å½•çš„æƒé™çªç„¶å˜äº†ï¼Œé€ æˆ403 forbiddenäº†ï¼ŒæŸ¥çœ‹nginxæ—¥å¿—ä¹Ÿæ˜¯æƒé™è¢«æ‹’ç»ï¼Œé€šè¿‡chmod -R 777 *è¿˜æ˜¯ä¸è¡Œï¼Œæœç´¢ç½‘ä¸Šå‘ç°éœ€è¦é‡å¯nginxï¼Œç®€å•reloadæ˜¯æ²¡ç”¨çš„ï¼Œè¿™é‡Œè®°å½•ä¸‹
Supervisorçš„ä½¿ç”¨ ä¸‹é¢è¯´è¯´Supervisorçš„ç”¨æ³•ï¼Œåˆšå¼€å§‹æŠ˜è…¾äº†åŠå¤©éƒ½ä¸èµ·ä½œç”¨ï¼Œå› ä¸º[include]å‰é¢çš„;å¿˜è®°åˆ æ‰äº†ï¼Œå½“æ—¶æ˜¯ç›´æ¥å†™åœ¨ä¸‹é¢äº†ï¼Œä¸ç®¡æ€ä¹ˆè¯´å€’æ˜¯èµ·ä½œç”¨äº†ï¼Œé…ç½®å¦‚ä¸‹ï¼š
[program:redis]command=redis-serverdirectory=/usr/local/bin/user=userautostart=trueautorestart=truestartsecs=2[program:TestApi]command=dotnet TestApi.dlldirectory=/home/project/TestApi/stderr_logfile=/var/log/museumApi.error.logstdout_logfile=/var/log/museumApi.stdout.logenvironment=ASPNETCORE_ENVIRONMNET=Productionuser=userautostart=trueautorestart=truestartsecs=2 è¿˜æœ‰webç®¡ç†ç•Œé¢ï¼Œé…ç½®å¦‚ä¸‹ï¼š
[inet_http_server] ; inet (TCP) server disabled by defaultport=0.0.0.0:9001 ; ip_address:port specifier, *:port for all ifaceusername=admin ; default is no username (open server)password=123123 ; default is no password (open server) ä¸è¿‡ä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ç”¨ï¼Œä¸å®‰å…¨ï¼"/>
<link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,300italic,400italic|Raleway:200,300" rel="stylesheet">

	<link rel="stylesheet" type="text/css" media="screen" href="css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="css/main.css" /><link rel="stylesheet" type="text/css" href="css/dark.css" media="(prefers-color-scheme: dark)" />

	<script src="js/feather.min.js"></script>
	
	<script src="js/main.js"></script>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
</head>

<body>
	<div class="container wrapper post">
		<div class="header">
	<h1 class="site-title"><a href="">hellojxl</a></h1>
	<div class="site-description"><h2></h2><nav class="nav social">
			<ul class="flat"><a href="https://github.com/jxl922/" title="Github"><i data-feather="github"></i></a><a href="https://twitter.com/hellojxl" title="Twitter"><i data-feather="twitter"></i></a></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">é¦–é¡µ</a>
			</li>
			
			<li>
				<a href="/posts">æ‰€æœ‰æ–‡ç« </a>
			</li>
			
			<li>
				<a href="/tags">æ ‡ç­¾</a>
			</li>
			
			<li>
				<a href="/about">å…³äºæˆ‘</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post-header">
			<h1 class="title">å…³äºSupervisorå’ŒNginxçš„ä½¿ç”¨</h1>
			<div class="meta">Posted at &mdash; Jun 8, 2018</div>
		</div>

		<div class="markdown">
			<p>æ„Ÿè§‰å¥½ä¹…æ²¡å†™äº†ï¼Œé‚£å°±ç®€å•è¯´ä¸€ä¸‹æœ€è¿‘å·¥ä½œä¸­æ‰€ç”¨åˆ°çš„Nginxå’ŒSupervisorå§ï¼Œè™½ç„¶ç½‘ä¸Šä¹Ÿä¸€æœä¸€å¤§æŠŠï¼Œå°±å½“è‡ªå·±åšä¸‹æ€»ç»“å§</p>
<h4 id="nginxçš„ä½¿ç”¨">Nginxçš„ä½¿ç”¨</h4>
<p>å·¥ä½œä¸­ç”¨çš„æ˜¯centosï¼Œå®‰è£…ç®€å•çš„ç”¨yumç›´æ¥å®‰è£…çš„ï¼Œè¿˜å¯ä»¥ç›´æ¥å¼€æœºå¯åŠ¨ï¼Œä¸‹é¢ç®€å•è¯´è¯´è·¯å¾„åŒ¹é…çš„é—®é¢˜ï¼Œé¡¹ç›®åˆšå¼€å§‹çš„æ˜¯ç”¨çš„æ˜¯åç¼€åè¿›è¡ŒåŒ¹é…ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">location ~*\.(gif|png|jpg|jpeg|bmp)$ {
	default_type	&#39;application/octet-stream&#39;;
	root		/home/Images/;
	expires		1d;
}
</code></pre></div><p>å¦‚æœé¡¹ç›®ä¸­åªéœ€è¦åŒ¹é…ä¸€ç§ç±»å‹çš„å›¾ç‰‡ç”¨è¿™ç§æ¨¡å¼å°±å¯ä»¥äº†ï¼Œå¦å¤–è¿™ç§åŒ¹é…æ¯”locationè¦ç²¾ç¡®ï¼Œæ‰€ä»¥é»˜è®¤æœ€ç»ˆä¼šåŒ¹é…è¿™ç§ç±»å‹ï¼Œæ¯”å¦‚æƒ³è®¿é—®swaggerçš„å›¾ç‰‡ï¼Œç»“æœå°±å› ä¸ºè¿™ä¸ªåŸå› è®¿é—®ä¸äº†ï¼Œå¯ä»¥å°è¯•åŠ ^~è¿›è¡Œå¤„ç†å¹¶ä¸”è¦æ”¾åˆ°è¿™ä¸ªä¹‹å‰ï¼Œä½†æ˜¯å› ä¸ºè¿™ä¸ªé¡¹ç›®ä¸­åˆ†å¥½å‡ ç§ç±»å‹çš„å›¾ç‰‡ï¼Œéœ€è¦å•ç‹¬åˆ†å¼€è®¿é—®ï¼Œæ‰€ä»¥æœ€ç»ˆå…¨æ˜¯ç”¨locationè¿›è¡ŒåŒ¹é…çš„ï¼Œè€Œä¸”å˜ç®€å•äº†</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">location ~* /logo/ {
		root		/;
		rewrite		/logo/(.*)$ /home/logo/Images/$1 break;
}
</code></pre></div><p>è¿˜æœ‰æ¬¡ä¸çŸ¥é“ä»€ä¹ˆåŸå› webç›®å½•çš„æƒé™çªç„¶å˜äº†ï¼Œé€ æˆ403 forbiddenäº†ï¼ŒæŸ¥çœ‹nginxæ—¥å¿—ä¹Ÿæ˜¯æƒé™è¢«æ‹’ç»ï¼Œé€šè¿‡chmod -R 777 *è¿˜æ˜¯ä¸è¡Œï¼Œæœç´¢ç½‘ä¸Šå‘ç°éœ€è¦é‡å¯nginxï¼Œç®€å•reloadæ˜¯æ²¡ç”¨çš„ï¼Œè¿™é‡Œè®°å½•ä¸‹</p>
<h4 id="supervisorçš„ä½¿ç”¨">Supervisorçš„ä½¿ç”¨</h4>
<p>ä¸‹é¢è¯´è¯´Supervisorçš„ç”¨æ³•ï¼Œåˆšå¼€å§‹æŠ˜è…¾äº†åŠå¤©éƒ½ä¸èµ·ä½œç”¨ï¼Œå› ä¸º[include]å‰é¢çš„;å¿˜è®°åˆ æ‰äº†ï¼Œå½“æ—¶æ˜¯ç›´æ¥å†™åœ¨ä¸‹é¢äº†ï¼Œä¸ç®¡æ€ä¹ˆè¯´å€’æ˜¯èµ·ä½œç”¨äº†ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">[program:redis]
command=redis-server
directory=/usr/local/bin/
user=user
autostart=true
autorestart=true
startsecs=2

[program:TestApi]
command=dotnet TestApi.dll
directory=/home/project/TestApi/
stderr_logfile=/var/log/museumApi.error.log
stdout_logfile=/var/log/museumApi.stdout.log
environment=ASPNETCORE_ENVIRONMNET=Production
user=user
autostart=true
autorestart=true
startsecs=2  
</code></pre></div><p>è¿˜æœ‰webç®¡ç†ç•Œé¢ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">[inet_http_server]         ; inet (TCP) server disabled by default
port=0.0.0.0:9001        ; ip_address:port specifier, *:port for all iface
username=admin              ; default is no username (open server)
password=123123               ; default is no password (open server)  
</code></pre></div><p>ä¸è¿‡ä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ç”¨ï¼Œä¸å®‰å…¨ï¼</p>
<h4 id="ç»“å°¾">ç»“å°¾</h4>
<p>æœ€è¿‘ä¸€ç›´åœ¨ç”¨Linuxéƒ¨ç½²ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼Œå¦å¤–æƒ³ä½¿ç”¨ä¸€ä¸‹CIå·¥å…·ï¼Œå¯æ‰¾æ¥æ‰¾å»è¦ä¹ˆæ˜¯åœ¨çº¿çš„ï¼Œè¦ä¹ˆæ˜¯Javaä¸‹çš„ï¼Œæœ¬äººæœ‰ç‚¹åæ‰§ï¼Œä¸æƒ³åŒæ—¶åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šå®‰è£…ä¸¤ç§SDKï¼Œ.netä¸‹çš„å°±ä¸€ä¸ªCruiseControl.NETï¼Œè²Œä¼¼è¿˜ä¸æ”¯æŒLinuxï¼Œæ„Ÿè§‰ç”šæ˜¯æ‚²å“€å•Šï¼Œæ²¡åŠæ³•ï¼Œè°è®©ä½ ä¹‹å‰ä¸è·¨å¹³å°å‘¢ï¼Œæ‰“ç®—è‡ªå·±å†™ä¸ªç®€å•ç‚¹çš„å·¥å…·ï¼Œå°±è¿™æ ·å§ğŸ‘¿</p>

		</div>

		<div class="post-tags">
			
				
					<nav class="nav tags">
							<ul class="flat">
								
								<li><a href="/tags/nginx">nginx</a></li>
								
								<li><a href="/tags/supervisor">supervisor</a></li>
								
								<li><a href="/tags/linux">linux</a></li>
								
							</ul>
					</nav>
				
			
		</div>
		<div id="disqus_thread"></div>
<script type="text/javascript">
	(function () {
		
		
		if (window.location.hostname == "localhost")
			return;

		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		var disqus_shortname = 'localhost';
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
		Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> Â© Copyright hellojxl |  <a href="https://github.com/vividvilla/ezhil">Ezhil theme</a> | Built with <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-123-45', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

<script>feather.replace()</script>
</body>
</html>
